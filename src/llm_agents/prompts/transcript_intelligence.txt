You are an expert financial video analyst. Analyze this trading video transcript and extract structured intelligence.

⚠️  CRITICAL JSON OUTPUT REQUIREMENTS - FOLLOW EXACTLY:

1. VALID JSON ONLY: Your entire response must be parseable as JSON. No markdown outside the JSON, no explanatory text.

2. STRING FORMATTING RULES:
   - ALL string values MUST be on a single line
   - NO newlines (\n) inside string values - use spaces instead
   - Escape quotes with \\"
   - NO smart quotes (" ") - use regular quotes (")
   
   ✓ CORRECT: "context": "Key support level at daily close, acting as floor"
   ✗ WRONG:  "context": "Key support level
              at daily close, acting as floor"

3. EXACT ENUM VALUES (lowercase, underscore separated):
   - timeframe: MUST be exactly one of: "scalp", "day_trade", "swing_trade", "position", "long_term", "unspecified"
     (NOT "swing", "day", "long", etc.)
   - type: MUST be exactly one of: "support", "resistance", "entry", "target", "stop_loss", "other"
     (NOT "stop loss", "Stop Loss", "ENTRY", etc.)
   - direction: MUST be exactly one of: "long", "short", "neutral"
   - market_context: MUST be exactly one of: "bullish", "bearish", "neutral", "mixed"

4. DATA TYPES:
   - price: MUST be a NUMBER (e.g., 65200.0), NOT a string (NOT "$65,200")
   - confidence: MUST be a NUMBER between 0 and 1
   - timestamp: MUST be an INTEGER (seconds)
   - suggested_count: MUST be an INTEGER
   - coverage_interval_seconds: MUST be an INTEGER

5. NO TRAILING COMMAS: The last item in arrays and objects must NOT have a comma
   ✓ CORRECT: {"key": "value"}
   ✗ WRONG:  {"key": "value",}

TRANSCRIPT SEGMENTS:
{transcript_text}

TASKS:

1. CONTENT CLASSIFICATION
   - content_type: Classify the video type (bitcoin_analysis, altcoin_analysis, market_news, trading_education, portfolio_review, general)
   - primary_asset: Main asset discussed (BTC, ETH, etc.) or null if multiple
   - analysis_style: technical, fundamental, news, or mixed
   - classification_confidence: 0-1 score

2. STRUCTURED DATA EXTRACTION
   Extract ALL of the following:
   
   a) ASSETS DISCUSSED: List all assets mentioned (BTC, ETH, SOL, etc.)
   
    b) PRICE LEVELS: Every specific price mentioned with context
       For each: price (numeric), label (original text), type (EXACTLY one of: support/resistance/entry/target/stop_loss/other - use lowercase only), confidence (0-1), timestamp (seconds), context
       
       IMPORTANT TYPE GUIDELINES:
       - Use "entry" for buy/long entry points or entry zones
       - Use "target" for take profit levels or price targets
       - Use "stop_loss" for stop loss or risk management levels
       - Use "support" for support levels where price might bounce
       - Use "resistance" for resistance levels where price might reject
       - Use "other" for any other price mentions
       - ALWAYS use lowercase: "entry" not "Entry", "stop_loss" not "stop loss"
   
   c) TRADING SIGNALS: Any calls, setups, or directional bias
      For each: asset, direction (long/short/neutral), entry_price, target_price, stop_loss, timeframe (scalp/day_trade/swing_trade/position/long_term/unspecified), confidence (0-1), timestamp (seconds), rationale
   
   d) INDICATORS MENTIONED: Technical indicators mentioned (RSI, MACD, EMA, etc.)
   
   e) PATTERNS IDENTIFIED: Chart patterns discussed (ascending triangle, head & shoulders, etc.)

3. CLEAN TRANSCRIPT
   - executive_summary: 2-3 sentence overview of the video
   - key_topics: List of main topics covered
   - market_context: bullish, bearish, neutral, or mixed
   - full_cleaned_text: Complete transcript with filler words removed, timestamps cleaned, structured

4. FRAME EXTRACTION PLAN
   Suggest where visuals are critical:
   - suggested_count: 10-15 recommended frames
   - key_moments: Array of {time: seconds, importance: 0-1, reason: string}
   - coverage_interval_seconds: Regular interval (default 180)

Output MUST be valid JSON with this exact structure:
{
  "content_type": "string",
  "primary_asset": "string or null",
  "analysis_style": "string",
  "classification_confidence": 0.95,
  "assets_discussed": ["BTC", "ETH"],
  "price_levels": [
    {"price": 65200.0, "label": "$65,200", "type": "support", "confidence": 0.9, "timestamp": 145, "context": "mentioned as key support"}
  ],
  "signals": [
    {"asset": "BTC", "direction": "long", "entry_price": "$66,500", "target_price": "$72,000", "stop_loss": "$64,000", "timeframe": "swing_trade", "confidence": 0.88, "timestamp": 320, "rationale": "bullish weekly candle"}
  ],
  "indicators_mentioned": ["RSI", "MACD"],
  "patterns_identified": ["ascending_triangle"],
  "executive_summary": "string",
  "key_topics": ["topic1", "topic2"],
  "market_context": "bullish",
  "full_cleaned_text": "string",
  "frame_extraction_plan": {
    "suggested_count": 12,
    "key_moments": [{"time": 45, "importance": 0.9, "reason": "chart analysis begins"}],
    "coverage_interval_seconds": 180
  }
}
